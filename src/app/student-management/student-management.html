


<div class="h-screen  bg-gray-50">
  <div class="py-4">
    <h1 class="text-xl text-gray-500">Student</h1>
  </div>
  <div class="flex-grow overflow-auto bg-white">
    <table class="w-full min-w-full border border-gray-200 table-fixed">
      <thead class="bg-gray-600 text-white sticky top-0">
        <tr>
          <th class="py-3 px-3 text-left">Student</th>
          <th class="py-3 px-4 text-left">Program</th>
          <th class="py-3 px-4 text-left">Mentor</th>
          <th class="py-3 px-4 text-left">Progress</th>
          <th class="py-3 px-4 text-left">Task Activity</th>
          <th class="py-3 px-4 text-left">Status</th>
          <th class="py-3 px-4 text-center">Actions</th>
        </tr>
      </thead>
      <tbody class="text-gray-700">
        <tr *ngFor="let student of students" class="border-b hover:bg-gray-50">
          <td class="py-3 px-4">{{ student.name }}</td>
          <td class="py-3 px-4">{{ student.program }}</td>
          <td class="py-3 px-4">{{ student.mentor }}</td>
          <td class="py-3 px-4">
            <div class="w-full bg-gray-200 rounded-full h-2.5">
              <div class="bg-green-500 h-2.5 rounded-full" [style.width.%]="student.progress"></div>
            </div>
            <span class="text-sm text-gray-600">{{ student.progress }}%</span>
          </td>
          <td class="py-2 px-2 space-x-1">
            <button
              (click)="openTaskModal(student)"
              class="bg-blue-500 text-white px-2 py-0.5 rounded hover:bg-blue-600 text-xs"
            >
             History
            </button>
          </td>
          <td class="py-3 px-4">
            <span
              class="px-2 py-1 text-sm rounded-full"
              [ngClass]="{
                'bg-green-100 text-green-700': student.status === 'Active',
                'bg-yellow-100 text-yellow-700': student.status === 'Pending',
                'bg-blue-100 text-blue-700': student.status === 'Completed'
              }"
            >
              {{ student.status }}
            </span>
          </td>
          <td class="py-2 px-2 text-center space-x-1">
            <button
              (click)="openViewModal(student)"
              class="bg-blue-500 text-white px-2 py-0.5 rounded hover:bg-blue-600 text-xs"
            >
              View
            </button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>

<!--  View Student Modal -->
<div *ngIf="viewStudent" class="fixed inset-0  bg-opacity-50 flex items-center justify-center z-50 p-4">
  <div class="bg-white w-full max-w-md p-6 rounded-2xl shadow-2xl border border-gray-200 overflow-y-auto max-h-[90vh]">
    <h2 class="text-2xl font-bold text-gray-800 mb-5 text-center border-b pb-3">Student Details</h2>

    <form class="space-y-3">
      <div>
        <label class="block text-gray-700 mb-1 text-sm">Name</label>
        <input type="text" [value]="viewStudent.name" readonly class="w-full border border-gray-300 rounded-lg px-3 py-2 bg-gray-100 text-gray-500 text-sm"/>
      </div>

      <div>
        <label class="block text-gray-700 mb-1 text-sm">Program</label>
        <input type="text" [value]="viewStudent.program" readonly class="w-full border border-gray-300 rounded-lg px-3 py-2 bg-gray-100 text-gray-500  text-sm"/>
      </div>

      <div>
        <label class="block text-gray-700 mb-1 text-sm">Mentor</label>
        <input type="text" [value]="viewStudent.mentor" readonly class="w-full border border-gray-300 rounded-lg px-3 py-2 bg-gray-100 text-gray-500  text-sm"/>
      </div>

      <div>
        <label class="block text-gray-700 mb-1 text-sm">Progress</label>
        <input type="text" [value]="viewStudent.progress + '%'" readonly class="w-full border border-gray-300 rounded-lg px-3 py-2 text-gray-500  bg-gray-100 text-sm"/>
      </div>

      <div>
        <label class="block text-gray-700 mb-1 text-sm">Status</label>
        <input type="text" [value]="viewStudent.status" readonly class="w-full border border-gray-300 rounded-lg px-3 py-2 bg-gray-100 text-gray-500  text-sm"/>
      </div>

      <div class="flex justify-center gap-3 mt-4">
        <button (click)="closeViewModal()" type="button" class="bg-gray-500 text-white px-4 py-2 rounded-md hover:bg-gray-600 text-sm">Cencel</button>
        <button type="button" class="bg-gray-500 text-white px-2 py-1 rounded-md hover:bg-gray-600 text-sm">Approve</button>
        <button type="button" class="bg-gray-500 text-white px-2 py-1 rounded-md hover:bg-gray-600 text-sm">Delete</button>
      </div>
     
    </form>
  </div>
</div>

<!-- Task History Modal -->
<div *ngIf="taskStudent" class="fixed inset-0  bg-opacity-50 flex items-center justify-center z-50 p-4">
  <div class="bg-white w-full max-w-lg p-6 rounded-2xl shadow-2xl border border-gray-200 overflow-y-auto max-h-[90vh]">
    <h2 class="text-xl font-bold text-gray-800 text-center mb-4">{{ taskStudent.student.name }} - Task History</h2>

    <table class="w-full border text-sm mb-4">
      <thead class="bg-gray-100">
        <tr>
          <th class="border px-2 py-2 text-left text-gray-500">Task Name</th>
          <th class="border px-2 py-2 text-left text-gray-500">Start</th>
          <th class="border px-2 py-2 text-left text-gray-500">End</th>
          <th class="border px-2 py-2 text-left text-gray-500">Status</th>
        </tr>
      </thead>

      <tbody>
        <tr *ngFor="let task of taskStudent.tasks">
          <td class="border px-2 py-1 text-gray-500">{{ task.name }}</td>
          <td class="border px-2 py-1 text-gray-500">{{ task.startDate }}</td>
          <td class="border px-2 py-1 text-gray-500">{{ task.endDate }}</td>
          <td class="border px-2 py-1 text-gray-500">{{ task.status }}</td>
        </tr>

        <tr *ngIf="taskStudent.tasks.length === 0">
          <td class="border px-2 py-2 text-center text-gray-500" colspan="3">‚ùå No Task Assigned</td>
        </tr>
      </tbody>
    </table>

    <div class="flex justify-center">
      <button (click)="closeTaskModal()" class="bg-red-500 text-white px-2 py-1 rounded-md hover:bg-red-600 text-sm">Cencel</button>
    </div>
  </div>
</div>
